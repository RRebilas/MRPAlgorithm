<!-- <form [formGroup]="form">
  <ng-container *ngIf="dataSource$ | async as dataSource">
    <table>
      <tr>
        <th *ngFor="let name of displayedColumns">{{ name }}</th>
      </tr>
      <tr *ngFor="let element of dataSource">
        <td>{{ element.week }}</td>
        <td>{{ element.grossRequirement }}</td>
        <td>
          <ng-container [formGroupName]="element.week - 1">
            <input
              type="number"
              matInput
              [min]="0"
              formControlName="planowanePrzyjecia"
            />
          </ng-container>
        </td>
        <td>{{ element.available }}</td>
        <td>{{ element.nettRequirements }}</td>
        <td>{{ element.plannedOrderReceipts }}</td>
        <td>{{ element.plannedOrderRelease }}</td>
      </tr>
    </table>
    <input type="number" matInput [min]="0" formControlName="czasRealizacji" />
    <input type="number" matInput [min]="0" formControlName="naStanie" />
    <ng-container>
      <input
        type="number"
        matInput
        [min]="0"
        formControlName="planowanePrzyjecia"
      />
    </ng-container>
  </ng-container>
</form> -->
<form [formGroup]="form">
  <ng-container *ngIf="dataSource$ | async as dataSource">
    <ng-container *ngIf="dataSource?.length !== 0">
      <mat-table
        [dataSource]="dataSource ?? []"
        class="mat-elevation-z8 mrp-table"
        formArrayName="planowanePrzyjecia"
      >
        <ng-container matColumnDef="mrp-week">
          <mat-header-cell *matHeaderCellDef>Okres</mat-header-cell>
          <mat-cell *matCellDef="let element">{{ element.week }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="mrp-grossRequirements">
          <mat-header-cell *matHeaderCellDef
            >Całkowite zapotrzebowanie</mat-header-cell
          >
          <mat-cell *matCellDef="let element">{{
            element.grossRequirement
          }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="mrp-scheduled">
          <mat-header-cell *matHeaderCellDef
            >Planowane przyjęcia</mat-header-cell
          >
          <mat-cell *matCellDef="let element">
            <ng-container [formGroupName]="element.week - 1">
              <input
                type="number"
                matInput
                [min]="0"
                formControlName="planowanePrzyjecia"
              />
            </ng-container>
          </mat-cell>
        </ng-container>

        <ng-container matColumnDef="mrp-available">
          <mat-header-cell *matHeaderCellDef
            >Przewidywane na stanie</mat-header-cell
          >
          <mat-cell *matCellDef="let element">{{ element.available }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="mrp-nettRequirements">
          <mat-header-cell *matHeaderCellDef
            >Zapotrzebowanie netto</mat-header-cell
          >
          <mat-cell *matCellDef="let element">{{
            element.nettRequirements
          }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="mrp-plannedOrderReceipts">
          <mat-header-cell *matHeaderCellDef
            >Planowane zamówienia</mat-header-cell
          >
          <mat-cell *matCellDef="let element">{{
            element.plannedOrderReceipts
          }}</mat-cell>
        </ng-container>

        <ng-container matColumnDef="mrp-plannedOrderRelease">
          <mat-header-cell *matHeaderCellDef
            >Planowane przyjęcie zamówień</mat-header-cell
          >
          <mat-cell *matCellDef="let element">{{
            element.plannedOrderRelease
          }}</mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
      </mat-table>

      <div class="inputs-container">
        <mat-form-field>
          <mat-label>Czas realizacji</mat-label>
          <input
            type="number"
            matInput
            [min]="0"
            formControlName="czasRealizacji"
          />
        </mat-form-field>
        <mat-form-field>
          <mat-label>Wielkość partii</mat-label>
          <input
            type="number"
            matInput
            [min]="0"
            formControlName="wielkoscPartii"
          />
        </mat-form-field>
        <mat-form-field>
          <mat-label>Na stanie</mat-label>
          <input type="number" matInput [min]="0" formControlName="naStanie" />
        </mat-form-field>
      </div>
    </ng-container>
  </ng-container>
</form>
